[% INCLUDE "intranet-top.inc" %]

<link rel="stylesheet" href="[% themelang %]/includes/calendar/themes/winter.css" />
<link rel="stylesheet" href="[% themelang %]/includes/calendar/themes/layouts/huge.css" />
                                                                                                                             
<!-- <link href="[% themelang %]/includes/calendar/doc/css/zpcal.css" rel="stylesheet" type="text/css"> -->
<!-- <link href="[% themelang %]/includes/calendar/doc/css/template.css" rel="stylesheet" type="text/css"> -->
                                                                                                                             
<!-- import the calendar script -->
<script type="text/javascript" src="[% themelang %]/includes/calendar/src/utils.js"></script>
                                                                                                                             
<script type="text/javascript" src="[% themelang %]/includes/calendar/src/calendar.js"></script>
                                                                                                                             
<!-- import the language module -->
<script type="text/javascript" src="[% themelang %]/includes/calendar/lang/calendar-es.js"></script>
                                                                                                                             
<!-- import the calendar setup script -->
<script type="text/javascript" src="[% themelang %]/includes/calendar/src/calendar-setup.js"></script>


<table width='90%' align='center'>
<tr>
<td class="inputFontNormal">
        <div class='zpCalSubheader' style='text-align:center'>[% "Seleccione los d&iacute;as de inactividad en la biblioteca (feriados, paros, etc.)" | i18n %]</div><br/>
</td>
</tr>

<tr>
<td align='center'>

<table>
<tr>
<td></td>
<td align='center'>
        <div id="flatcalMultiDays" style="float: left"></div><br/>
</td>
<td></td>
</tr>
</table>

</td>
</tr>

<tr>
<td align='center'>
	<form name="feriados" action="feriados.pl">
		<input type="hidden" name="feriadosh" id="feriadosh" value="">
                [% PERL %]
                                print C4::AR::Filtros::to_Button( 
                                                                    text    =>  "[% 'Guardar' | i18n %]",
                                                                    boton   =>  "boton_buscar",
                                                                    onClick =>  "cal.submitFlatDates(); submit();",
                                                                    title   =>  "[% 'Guardar' | i18n %]",
                                        ) ;
                [% END %]
	</form>
</td>
</tr>
</table>

<script type="text/javascript">//<![CDATA[
        <!--  to hide script contents from old browsers
        // the default multiple dates selected, first time the calendar is instantiated

	var MA= new Array();
	[% FOREACH loop %]
		MA[MA.length]= new Date([% anio %], [% mes %], [% dia %]);
	[% END %]


        function flatCallback(cal) {
                MA.length = 0;
                for (var i in cal.multiple) {
                        var currentDate = cal.multiple[i];
                        // sometimes the date is not actually selected, that's why we need to check.
                        if (currentDate) {
                                fecha= currentDate.print("%Y-%m-%d");
                                // and push it in the "MA", in case one triggers the calendar again.
                                MA[MA.length] = fecha;
                        }
                }
        	document.getElementById('feriadosh').value=MA.join(',');
	}

        // end hiding contents from old browsers  -->
</script>

<script type="text/javascript">
	var cal = new Zapatec.Calendar.setup({
                                                                                                                             
        flat               : "flatcalMultiDays", // ID of the parent element
        flatCallback   : flatCallback,
        align              : "BR",
        showOthers         : true,
        //sortOrder        : "desc", //default is "asc"ending; or remove comment to sort in "desc"ending order; or "none" to NOT sort the multiple dates.
        multiple           : MA, // pass the initial or computed array of multiple dates to be initially selected
	weekNumbers	   : false
                                                                                                                             
        });
                                                            
</script>
	
[% INCLUDE "intranet-bottom.inc" %]
