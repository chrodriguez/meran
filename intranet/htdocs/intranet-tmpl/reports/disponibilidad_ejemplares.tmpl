[% INCLUDE "intranet-top.inc" %]

<script src="/includes/jquery/datetimepicker/ui.datepicker.js"></script>
<link href="/includes/jquery/datetimepicker/flora.datepicker.css" type="text/css" rel="stylesheet">
<script src="/includes/jquery/validate/jquery.validate.js"></script>

<script type="text/javascript">

$(document).ready(function() {
    crearDatePicker('fechaIni');
    crearDatePicker('fechaFin');

});
</script>

<script>

var objAH;

function ordenar(orden){
	objAH.sort(orden);
}

function changePage(ini){
	objAH.changePage(ini);
}

function updateInfo(responseText){
	$("#result").html(responseText);
	zebra("tablaResult");
}

function consultar(){
	objAH=new AjaxHelper(updateInfo);
    objAH.debug= true;
    objAH.showOverlay       = true;
	objAH.url=URL_PREFIX+"/reports/disponibilidad_ejemplares_result.pl";
	objAH.ui=$("#id_ui").val();
	objAH.fechaIni=$("#fechaIni").val();
	objAH.fechaFin=$("#fechaFin").val();
	objAH.disponibilidad=$("#disponibilidad_id").val();
	objAH.funcion= "changePage";
	objAH.sendToServer();
}

function generarPDF(){
    $('#unidadInformacion')[0].href="[% url_prefix %]/reports/printDisponibilidadEjemplares.pl";
    $('#unidadInformacion')[0].target= "_self";
    $('#unidadInformacion')[0].type.value= "pdf";
    $('#unidadInformacion')[0].submit();
}

function imprimir(){
    $('#unidadInformacion')[0].href="[% url_prefix %]/reports/printDisponibilidadEjemplares.pl";
    $('#unidadInformacion')[0].target= "_blank";
    $('#unidadInformacion')[0].type.value= "print";
    $('#unidadInformacion')[0].submit();
}

</script>
<fieldset>
    <legend>
      <span class="titulos">[% "Disponibilidad de Ejemplares" | i18n %]</span>
    </legend>
    
    <input TYPE="hidden" VALUE="[% orden %]" NAME="orden" >
    
    <div class="filtros_reportes">
        <ul class="filtros_reportes_izq">
            <li class="sub_item">
                <label for="id_ui">[% "Seleccione una unidad de informaci&oacute;n:" | i18n %]</label>
                [% unidades %]
                [% disponibilidades %]
            </li>
            <li class="sub_item">
                <label for="fechaIni">[% "Seleccione una fecha de inicio:" | i18n %]</label>
                <input type="text" id="fechaIni"> 
            </li>
            <li class="sub_item">
                <label for="fechaFin">[% "Seleccione una fecha de fin" | i18n %]:</label>
                <input id="fechaFin" type="text" > 
            </li>
        </ul>
    </div>
    
    <div class="buttonContainerHorizontal">
                [% PERL %]
                                print C4::AR::Filtros::to_Button( 
                                                                    text    =>  "[% 'Generar Listado' | i18n %]",
                                                                    boton   =>  "boton_buscar",
                                                                    onClick =>  "consultar();",
                                        ) ;
                [% END %]
    </div>
</fieldset>

<div id="result"></div>

[% INCLUDE "intranet-bottom.inc" %]
