[% INCLUDE "intranet-top.inc" %]

<script>

var objAH;

function ordenar(orden){
	objAH.sort(orden);
}

function ocultarBoton(tipoReserva){
	var botonMail=$("#contacto");
	if(tipoReserva != "EJ"){
		botonMail.hide();
	}
	else{
		botonMail.show();
	}
}

var tipoReserva; // Para poder ocultar el boton ya que si realiza la consulta por Grupo o todas y cambia el combo por ejemplar el boton de contactar por mail se hace visible, con esta variable me aseguro que eso no pase. Se setea cuando se hace la consulta.
function updateInfo(responseText){
	$("#result").html(responseText);
	ocultarBoton(tipoReserva);
	zebra("tablaResult");
}

function changePage(ini){
	objAH.changePage(ini);
}


function consultar(){
	tipoReserva=$("#tipoReserva").val();
	objAH=new AjaxHelper(updateInfo);
	objAH.url="/cgi-bin/koha/reports/reservasResult.pl";
	objAH.id_ui=$("#id_ui").val();
	objAH.tipoReserva=tipoReserva;
	objAH.funcion= "changePage";
	objAH.sendToServer();
}

</script>

<div class="titulos" >[% "Reservas" | i18n %]</div>

<div class="filtros_reportes">

    <ul class="filtros_reportes_izq">
        <li>[% "Seleccione el tipo de reserva:" | i18n %]
			<select name="tipoReserva" id="tipoReserva">
				<option selected="selected" value="EJ" id="EJ">[% "Por ejemplar" | i18n %]</option>
				<option value="GR" id="GR">[% "Por grupo" | i18n %]</option>
				<option value="TO" id="TO">[% "Todas" | i18n %]</option>
			</select>
		</li>

        <li>
            [% "Seleccione una unidad de informaci&oacute;n:" | i18n %]
            [% unidades %]
        </li>
    </ul>
</div>
<div class="buttonContainerHorizontal">
    [% PERL %]
                    print C4::AR::Filtros::to_Button( 
                                                        text    =>  "[% 'Buscar' | i18n %]",
                                                        boton   =>  "boton_buscar",
                                                        onClick =>  "consultar();",
                            ) ;
    [% END %]
</div>

<div id="result"></div>

[% INCLUDE "intranet-bottom.inc" %]
