[% INCLUDE 'intranet-top.inc' %]

<script>

function esconderResultadosZ3950(){
    $('#busquedasZ3950').show();
    $('#resultadoZ3950').hide();
}

function verResultadosZ3950 (id){
    objAH=new AjaxHelper(updateVerResultadosZ3950);
    objAH.url= "/cgi-bin/koha/z3950/filtradoZ3950DB.pl";
    objAH.tipo="VER_RESULTADO";
    objAH.id_busqueda= id;
    objAH.sendToServer();
}

function updateVerResultadosZ3950(responseText){
    $('#resultadoZ3950').html(responseText);
    zebra('datos_tabla');
    $('#busquedasZ3950').hide();
    $('#resultadoZ3950').show();
}


function verBusquedas (){
    objAH=new AjaxHelper(updateVerBusquedas);
    objAH.url= "/cgi-bin/koha/z3950/filtradoZ3950DB.pl";
    objAH.tipo="VER_BUSQUEDAS";
    objAH.sendToServer();
}

function updateVerBusquedas(responseText){
    $('#busquedasZ3950').html(responseText);
   zebra('datos_tabla');
    $('#busquedasZ3950').show();
}

function agregarBusquedaZ3950(){
    if(($('#titulo').val() !='')&&($('#autor').val() !='')){}
    else {
	objAH=new AjaxHelper(updateAgregarBusquedaZ3950);
	objAH.url= "/cgi-bin/koha/z3950/filtradoZ3950DB.pl";
    objAH.tipo="BUSCAR";
    if($('#titulo').val() !=''){
        objAH.tipobusqueda= 'title';
        objAH.busqueda= $('#titulo').val();
    } else {
        objAH.tipobusqueda= 'author';
        objAH.busqueda= $('#autor').val();
    }
	    objAH.sendToServer();
    }
}

function updateAgregarBusquedaZ3950(responseText){
    verBusquedas();
}


$(document).ready(function() {
    verBusquedas();
       //     setInterval( "verBusquedas()", 30000 );
});
</script>

<fieldset class="resultados_busqueda">
<legend class="titulo_legend">[% "B&uacute;squeda Z3950" | i18n %]:</legend>
<div class="datos_tabla_div_z3950">
    <ul>
    <li class="item" >
        <label for="titulo">
            [% "T&iacute;tulo" | i18n %]
        </label>
        <input type="text" id="titulo" size="20" tabindex=1>
    </li>
    <li class="item" >
        <label for="autor">
            [% "Autor" | i18n %]
        </label>
        <input type="text" id="autor" size="20" tabindex=1>
    </li>
    <li class="item" >
            [% PERL %]
                                print C4::AR::Filtros::to_Icon(
                                                                    boton   => "icon_buscar",
                                                                    onClick => "agregarBusquedaZ3950();",
                                                                    title   => "[% 'Buscar' | i18n %]",
                                        ) ;
            [% END %]
    </li>
    </ul>
</div>
</fieldset>

<div id="busquedasZ3950"></div>
<div id="resultadoZ3950"></div>
[% INCLUDE 'intranet-bottom.inc' %]