[% USE HTML %]

<script type="text/javascript">
var loaderPath= "";
      $(document).ready(function() {
        loaderPath = '<img src="'+imagesForJS+'/loaders/loader_facebook.gif"'+'>'
        makeToggle('datos_tabla_div','trigger',null,false);
        makeDataTable('#tablaResult');
        zebraId('tablaResult');
        onEnter('search_tabla',obtenerTablaFiltrada);
        $('.editable').editable('/cgi-bin/koha/admin/referencias/referenciasDB.pl', { 
              type      : 'text',
              cancel    : CANCELAR,
              submit    : OK,
              tooltip   : EDITABLE_MSG,
              placeholder: EDITABLE_MSG,
              style   : 'display: inline',
              submitdata : {token: "[% token %]", edit: '1'},
              indicator : loaderPath,

        });
      });
</script>
<div id="tabla_referencia">
<fieldset class="resultados_busqueda">
    <legend class="titulo_legend trigger click">[% "Tabla " | i18n %]: [% tabla %]</legend>
        <div class="search_tabla">
                    [% PERL %]
                        print C4::AR::Filtros::to_Button(   text    => "[% 'Agregar Registro' | i18n %]",
                                                            boton   => "boton_agregar",
                                                            onClick => "agregarRegistro('[% tabla %]');",
                                                            title   => "[% 'Agregar Registro' | i18n %]",
                                ) ;
                    [% END %]

            <fieldset class="center_fieldset">
                <legend class="titulo_legend">[% "Filtrar por:" | i18n %]</legend>
                <ul>
                    <li class="item">
                        <label for="search_tabla"> Tabla.: </label>
                        <input type="text" id="search_tabla" name="search_tabla"/>
                    </li>
                    [% PERL %]
                        print C4::AR::Filtros::to_Button(   text    => "[% 'Buscar' | i18n %]",
                                                            boton   => "boton_agregar",
                                                            onClick => "obtenerTablaFiltrada();",
                                                            title   => "[% 'Buscar' | i18n %]",
                                ) ;
                    [% END %]
                </ul>
            </fieldset>
        <div class="datos_tabla_div" id="datos_tabla_div">
            <div class="contenedor_paginador">[% paginador %]</div>
            <table id="tablaResult" class="datos_tabla" border=0 cellspacing=0 cellpadding=0>
                <thead>
                    <tr class="titulo_tabla_resultado">
                        [% FOREACH campo IN campos %]
                            <th class="click"> [% campo %]</th>
                        [% END %]
                        <th>[% "Asignar" | i18n %]</th>
                    </tr>
                </thead>
                <tbody>
                        [% FOREACH dato IN datos %]
                          <tr>
                            [% dato.printAsTableElement %]
                            <td>
                            [% PERL %]
                                print C4::AR::Filtros::to_Icon(  
                                                                    boton   => "icon_cancelar",
                                                                    onClick => "mostrarReferencias('[% tabla %]', '[% dato.getPkValue %]');",
                                                                    title   => "[% 'Asignar' | i18n %]",
                                                                    alternClass => "botonCentradoTabla",
                                                                    elem => 'span',
                                                                    style => 'float: left;',
                                        ) ;
                            [% END %]
                            </td>
                          </tr>
                        [% END %]
                </tbody>
            </table>
        </div>
</fieldset>
</div>