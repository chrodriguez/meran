[% INCLUDE "intranet-top.inc" %]

<script type="text/javascript" src="/intranet-tmpl/estadisticas/estadisticas.js"></script>

<script>

    function ordenar(orden){
	    objAH.sort  = orden;
        objAH.debug = true;
	    objAH.sendToServer();
    }

    function consultarPorBarcode(){
        objAH                   = new AjaxHelper(updateInfo);
        objAH.debug             = true;
        objAH.url               = "/cgi-bin/koha/reports/inventory-sig-topResult.pl";
        objAH.barcode           = $("#barcode").val();
        objAH.desde_barcode     = $("#desde_barcode").val();
        objAH.hasta_barcode     = $("#hasta_barcode").val();
        objAH.accion            = "CONSULTA_POR_BARCODE";
        //se envia la consulta
        objAH.sendToServer();
    }
    
    function consultarPorSignatura(){
	    objAH                   = new AjaxHelper(updateInfo);
        objAH.debug             = true;
	    objAH.url               = "/cgi-bin/koha/reports/inventory-sig-topResult.pl";
	    objAH.sigtop            = $("#sigtop").val();
        objAH.desde_signatura   = $("#desde_signatura").val();
        objAH.hasta_signatura   = $("#hasta_signatura").val();
        objAH.accion            = "CONSULTA_POR_SIGNATURA";
	    //se envia la consulta
	    objAH.sendToServer();
    }
    
    function updateInfo(responseText){
	    $("#result").html(responseText);
	    zebra("datos_tabla");
    }

// TODO enable/disable inputs
    function toggleChckSendmail(){
        $('#smtp_server_sendmail').click(function() {
            enableDisableInputs();
        });
    }

    function enableDisableInputs(){
        if ($('#smtp_server_sendmail').attr('checked')){
            $('#smtp_server_sendmail').attr('checked', true);
            $('#smtp_server').attr('disabled', true);
            $('#port_mail').attr('disabled', true);
            $('#username_mail').attr('disabled', true);
            $('#password_mail').attr('disabled', true);
            $('#smtp_metodo').attr('disabled', true);
        } else {
            $('#smtp_server_sendmail').attr('checked', false);
            $('#smtp_server').attr('disabled', false);
            $('#port_mail').attr('disabled', false);
            $('#username_mail').attr('disabled', false);
            $('#password_mail').attr('disabled', false);
            $('#smtp_metodo').attr('disabled', false);
        } 
    }

    $(document).ready(function() {
        //onEnter con foco en input, ejecuta la busqueda
        onEnter("barcode",consultarPorBarcode);
        onEnter("sigtop",consultarPorSignatura);
    });

</script>

<div class="titulos" >[% "Inventario por signatura topogr&aacute;fica / nro. inventario:" | i18n %]</div>

<fieldset>
    <legend class="titulo_legend">[% "Buscar signatura topogr&aacute;fica: &nbsp;" | i18n %]</legend>
        <ul>
            <li class="sub_item">
              <label for="sigtop">Signatura</label>
              <input type="text" id="sigtop" value="[% sigtop %]">
            </li>
<!--            <li class="sub_item">
                Min: [% signatura_min %] 
                Max: [% signatura_max %]
            </li>-->
            <li class="sub_item">
              <label for="desde_signatura">[% "Desde" | i18n %]</label>
              <input type="text" id="desde_signatura" value="[% desde_signatura %]"> Min: [% signatura_min %] 
            </li>
            <li class="sub_item">
              <label for="hasta_signatura">[% "Hasta" | i18n %]</label>
              <input type="text" id="hasta_signatura" value="[% hasta_signatura %]"> Max: [% signatura_max %] 
            </li>

            [% PERL %]
                            print C4::AR::Filtros::to_Button( 
                                                                text    =>  "[% 'Buscar' | i18n %]",
                                                                boton   =>  "boton_buscar",
                                                                onClick =>  "consultarPorSignatura();",
                                    ) ;
            [% END %]
        </ul>
</fieldset>

<fieldset>
    <legend class="titulo_legend">[% "Buscar nro. inventario: &nbsp;" | i18n %]</legend>
        <ul>
            <li class="sub_item">
              <label for="sigtop">Nro. Inventario</label>
              <input type="text" id="barcode" value="[% barcode %]">
            </li>
            <li class="sub_item">
              <label for="desde_signatura">[% "Desde" | i18n %]</label>
              <input type="text" id="desde_barcode" value="[% desde_barcode %]"> Min: [% barcode_min %] 
            </li>
            <li class="sub_item">
              <label for="hasta_signatura">[% "Hasta" | i18n %]</label>
              <input type="text" id="hasta_barcode" value="[% hasta_barcode %]"> Max: [% barcode_max %] 
            </li>

            [% PERL %]
                            print C4::AR::Filtros::to_Button( 
                                                                text    =>  "[% 'Buscar' | i18n %]",
                                                                boton   =>  "boton_buscar",
                                                                onClick =>  "consultarPorBarcode();",
                                    ) ;
            [% END %]
        </ul>
</fieldset>

<br>

<div id="result"></div>

[% INCLUDE "intranet-bottom.inc" %]
