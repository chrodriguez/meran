<script type="text/javascript" src="/includes/jquery/jquery.gritter.js"></script>
<script>


  function publicar_twitter(){
            objAH               = new AjaxHelper(updatePublicarTwitter);
            objAH.debug         = true;
            objAH.url           = URL_PREFIX+'/twitter.pl';
            
            objAH.tipoAccion    = "PUBLICAR_TWITTER";
            objAH.post          = $("#post_twitter").val();
            objAH.sendToServer();

    }

   function updatePublicarTwitter(responseText){
      if (!verificarRespuesta(responseText))
                return(0);
        var text=JSONstring.toObject(responseText).messages[0].message;
        $.extend($.gritter.options, {
            class_name: 'gritter', // for light notifications (can be added directly to $.gritter.add too)
            position: 'bottom-right', // possibilities: bottom-left, bottom-right, top-left, top-right
            fade_in_speed: 100, // how fast notifications fade in (string or int)
            fade_out_speed: 100, // how fast the notices fade out
            time: 3000 // hang on the screen for...
        });
        $.gritter.add({
                // (string | mandatory) the heading of the notification
                title: 'Twitter',
                // (string | mandatory) the text inside the notification
                text: text,
                // (bool | optional) if you want it to fade out on its own or just sit there
                sticky: false,
                // (int | optional) the time you want it to be alive for before fading out
                time: ''
        });

  }


  $(document).ready(function() {
        $('#publicar_twitter').click(function() {
             publicar_twitter();
             $.fancybox.close();
        });      
        
        $("#post_twitter").charCount({
            limit: 0,        
            warning: 10,
            counterElement: 'p',
            css: 'textareaCounter',
            cssWarning: 'textareaCounterwarning',
            cssExceeded: 'textareaCounterExceeded',
            counterText: 'Caraceteres restantes: '    
        });
 });

</script>
    <div class="fancybox_twitter" id="fancybox_twitter">
        <fieldset>
                <legend>[% 'Cuerpo del mensaje' | i18n %]:</legend>
                <textarea id="post_twitter" onkeyup='' name="textarea_twitter" style="padding:5px" rows="5" cols="50"></textarea>
                <input class= "fancybox_button" id="publicar_twitter" type="button" value="Enviar">
            <!--</form>-->
        </fieldset>
    </div>
