[% INCLUDE "intranet-top.inc" %]

<script language=javascript>
function todos(){
	var checks=document.getElementsByTagName("input");
	if (checks.length>0){
		for(i=0;i<checks.length;i++){
			if(checks[i].type == "checkbox"){
        			if(checks[i].checked){checks[i].checked=false}
				else{checks[i].checked=true}
			}
		}
	}
}

var objAH;//Objeto AjaxHelper.
/*
 * detalleUsuario
 * Funcion que hace la consulta Ajax para buscar los datos del usuario seleccionado, con el autocomplete.
 */
function borrarSanciones(chck){

    var chck=$("input[@name="+chck+"]:checked");
    var array= new Array;
    var long=chck.length;
    if ( long == 0){
        alert("Elija al menos una sanciona para eliminar");
    }
    else{

        var is_confirmed = confirm('Esta seguro que desea cancelar la sancion?');
        if (is_confirmed) {

            for(var i=0; i< long; i++){
            array[i]=chck[i].value;
            }

            objAH=new AjaxHelper();
            objAH.debug= true;
            objAH.url= '/cgi-bin/koha/circ/borrarsanciones.pl';
            objAH.datosArray= array;
            //se envia la consulta
            objAH.sendToServer();
            }
        }
}

</script>

<center>

<div class="titulos_interior" >[% "Sanciones" | i18n %]</div>

<table class="tabla_datos" border="0" cellpadding="0" cellspacing="0" width="99%">
	<tr class="tablaresultadoTitle">
  
  		<td align="center"><a href="#" onclick="todos();">
			<img src="[% themelang %]/images/check.png" title="Invertir la selecci&oacute;n"  border=0></a>
		</td>

  
		<td>[% "Tarjeta de Id." | i18n %]</td>
  		<td>[% "Socio" | i18n %]</td>
  		<td>[% "Legajo" | i18n %]</td>
  		<td>[% "Cat." | i18n %]</td>
  		<td>[% "Tipo de pr&eacute;stamo" | i18n %]</td>
  		<td>[% "Fecha inicio" | i18n %]</td>
  		<td>[% "Fecha fin" | i18n %]</td>

	</tr>
  [% FOREACH sancion IN SANCIONES %]
	<tr align="center">
		
			<td >
             <input type="checkbox" name="chkboxSanciones" value="[% sancion.getId_sancion %]" 
					id="[% sancion.getId_sancion %]">
    		</td>
	
		<td>[% sancion.getNro_socio %]</td>
		<td>
		[% sancion.socio.persona.getApeYNom %]
		</td>
		<td>[% sancion.socio.persona.getLegajo %]</td>
		<td>[% sancion.socio.categoria.getDescription %]</td>
		<td>
			[% IF sancion.getTipo_sancion %]
				[% sancion.ref_tipo_sancion.getTipo_prestamo %]
			[% ELSE %]
				Reserva no retirada
			[% END %]
		</td>
		<td>[% sancion.getFecha_comienzo_formateada %]</td>
		<td>[% sancion.getFecha_final_formateada %]</td>
		<td width="1%" >&nbsp;</td>
	</tr>
  [% END %]
    <tr>
	<td colspan="12" >&nbsp;</td>
    </tr>
	<tr><td colspan="12" align="center" >
            [% PERL %]
                                print C4::AR::Filtros::to_Button(   text    => "[% 'Borrar Sanciones' | i18n %]",
                                                                    boton   => "boton_borrar",
                                                                    onClick => "borrarSanciones('chkboxSanciones');",
                                                                    title   => "[% 'Borrar Sanciones' | i18n %]",
                                        ) ;
            [% END %]
	</td></tr>
	</form>
</table>
[% INCLUDE "intranet-bottom.inc" %]
